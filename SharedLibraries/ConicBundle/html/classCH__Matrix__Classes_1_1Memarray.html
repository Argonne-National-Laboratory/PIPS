<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ConicBundle: CH_Matrix_Classes::Memarray Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceCH__Matrix__Classes.html">CH_Matrix_Classes</a>::<a class="el" href="classCH__Matrix__Classes_1_1Memarray.html">Memarray</a>
  </div>
</div>
<div class="contents">
<h1>CH_Matrix_Classes::Memarray Class Reference<br>
<small>
[<a class="el" href="group__memarraygroup.html">Classes and Functions for Memory Management</a>]</small>
</h1><!-- doxytag: class="CH_Matrix_Classes::Memarray" -->A simple memory manager for frequent allocation and deallocation of arrays of roughly the same size.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="memarray_8hxx-source.html">memarray.hxx</a>&gt;</code>
<p>

<p>
<a href="classCH__Matrix__Classes_1_1Memarray-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8ba2f742db371c8e3cbb80ce70d44f0c"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::Memarray" ref="8ba2f742db371c8e3cbb80ce70d44f0c" args="(long number_of_entries, int number_of_sizes, int address_bits)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#8ba2f742db371c8e3cbb80ce70d44f0c">Memarray</a> (long number_of_entries, int number_of_sizes, int address_bits)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">specify inital number of <a class="el" href="classCH__Matrix__Classes_1_1Memarray_1_1Entry.html" title="holds the information of one allocated block and serves as an item in the singly...">Entry</a> items, the number of 2^i classes, the number of last bits used in finding entries to used adresses <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="99eecc7754a23aea913f56f32036e90f"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::get_in_use" ref="99eecc7754a23aea913f56f32036e90f" args="() const " -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#99eecc7754a23aea913f56f32036e90f">get_in_use</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">returns the number of Entry items in use <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cf8d66f156256ac7ad1aab351684bf96"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::get_memarray_users" ref="cf8d66f156256ac7ad1aab351684bf96" args="() const " -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#cf8d66f156256ac7ad1aab351684bf96">get_memarray_users</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">returns the number of announced "living" users of this Memory manager <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f52d497725ff056068902ec2f15c36de"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::increment_memarray_users" ref="f52d497725ff056068902ec2f15c36de" args="()" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#f52d497725ff056068902ec2f15c36de">increment_memarray_users</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">announce a new user <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="65ebb15b95bc5f3ae6623a5ba24ca4c9"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::decrement_memarray_users" ref="65ebb15b95bc5f3ae6623a5ba24ca4c9" args="()" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#65ebb15b95bc5f3ae6623a5ba24ca4c9">decrement_memarray_users</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">decrement number of announced users <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5159fc7ae907a7138237f1412f7a3db6"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::get" ref="5159fc7ae907a7138237f1412f7a3db6" args="(register long size, char *&amp;addr)" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#5159fc7ae907a7138237f1412f7a3db6">get</a> (register long size, char *&amp;addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">request a character array of at least this size, the address is then stored in addr and the actual size is returned <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="be6aa3762cd20af64c92f0c0ce2713b5"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::get" ref="be6aa3762cd20af64c92f0c0ce2713b5" args="(long size, double *&amp;addr)" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#be6aa3762cd20af64c92f0c0ce2713b5">get</a> (long size, double *&amp;addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">request a double array of at least this size, the address is then stored in addr and the actual size is returned <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ebdbd0a0361ba53c9fb03da791782cd3"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::get" ref="ebdbd0a0361ba53c9fb03da791782cd3" args="(long size, float *&amp;addr)" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#ebdbd0a0361ba53c9fb03da791782cd3">get</a> (long size, float *&amp;addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">request a float array of at least this size, the address is then stored in addr and the actual size is returned <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d08fbb825d28c36fa8e38582925351e7"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::get" ref="d08fbb825d28c36fa8e38582925351e7" args="(long size, long *&amp;addr)" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#d08fbb825d28c36fa8e38582925351e7">get</a> (long size, long *&amp;addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">request a long array of at least this size, the address is then stored in addr and the actual size is returned <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7132c1324633fd37ce0d44aec6ac565c"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::get" ref="7132c1324633fd37ce0d44aec6ac565c" args="(long size, int *&amp;addr)" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#7132c1324633fd37ce0d44aec6ac565c">get</a> (long size, int *&amp;addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">request an int array of at least this size, the address is then stored in addr and the actual size is returned <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5750b65e0d97a6734de3f182fe38cfba"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::free" ref="5750b65e0d97a6734de3f182fe38cfba" args="(register void *addr)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#5750b65e0d97a6734de3f182fe38cfba">free</a> (register void *addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">free the array pointed to by addr (addr must be an address returned by get) <br></td></tr>
<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a911cb8d0d3f0d968213e2290104e978"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::size_index" ref="a911cb8d0d3f0d968213e2290104e978" args="(register long size)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#a911cb8d0d3f0d968213e2290104e978">size_index</a> (register long size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">compute index for free list to a request of size <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="95cccad55a56c24bf5cf29175855cb9d"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::index_size" ref="95cccad55a56c24bf5cf29175855cb9d" args="(register int index)" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#95cccad55a56c24bf5cf29175855cb9d">index_size</a> (register int index)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">compute size of blocks in the free list with this index <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1225555b9548e15c93d62788a8ed33c6"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::addr_index" ref="1225555b9548e15c93d62788a8ed33c6" args="(register const char *addr)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#1225555b9548e15c93d62788a8ed33c6">addr_index</a> (register const char *addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">compute index into address class to retrieve entry of "addr" <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5db2869e3c043af52b15cdfe8884c09b"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::get_more_entries" ref="5db2869e3c043af52b15cdfe8884c09b" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#5db2869e3c043af52b15cdfe8884c09b">get_more_entries</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">double number of available Entry items <br></td></tr>
<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b46e69464e0b80ca11cc567d70921cc2"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::max_entries" ref="b46e69464e0b80ca11cc567d70921cc2" args="" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#b46e69464e0b80ca11cc567d70921cc2">max_entries</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">current number of Entry items available <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3d9eada1d327a3f395e481cf9402ebd1"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::max_sizes" ref="3d9eada1d327a3f395e481cf9402ebd1" args="" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#3d9eada1d327a3f395e481cf9402ebd1">max_sizes</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">current number of lists holding free blocks <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="25fd6770abacb533a96d36e70c88a7d1"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::max_addr_entr" ref="25fd6770abacb533a96d36e70c88a7d1" args="" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#25fd6770abacb533a96d36e70c88a7d1">max_addr_entr</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">current number of lists hodling occupied blocks <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2d801882108186eaf9ed5aeaec376915"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::addr_mask" ref="2d801882108186eaf9ed5aeaec376915" args="" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#2d801882108186eaf9ed5aeaec376915">addr_mask</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mask to extract last bits of an address as index for freeing <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c93359131d2fec6ac885ed15ffa630c4"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::in_use" ref="c93359131d2fec6ac885ed15ffa630c4" args="" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#c93359131d2fec6ac885ed15ffa630c4">in_use</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">number of Entry items in use (pointing to an allocated block) <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="09495ec55e688ca1c37c310f1baceb12"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::memarray_users" ref="09495ec55e688ca1c37c310f1baceb12" args="" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#09495ec55e688ca1c37c310f1baceb12">memarray_users</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">number of objects announced as "living" users of this memory manager <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="99a24eaf08cefd5447fb5c3ead2fd9bf"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::first_empty" ref="99a24eaf08cefd5447fb5c3ead2fd9bf" args="" -->
<a class="el" href="classCH__Matrix__Classes_1_1Memarray_1_1Entry.html">Entry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#99a24eaf08cefd5447fb5c3ead2fd9bf">first_empty</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">its next pointer points to the first free Entry item, that does not yet hold an allocated block <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0b29fe0a3664a734ae75b4a72552007d"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::entry_store" ref="0b29fe0a3664a734ae75b4a72552007d" args="" -->
<a class="el" href="classCH__Matrix__Classes_1_1Memarray_1_1Entry.html">Entry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#0b29fe0a3664a734ae75b4a72552007d">entry_store</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">points to the allocated array of Entry items <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2b97493e471167a748db9949f9f3aa23"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::first_free" ref="2b97493e471167a748db9949f9f3aa23" args="" -->
<a class="el" href="classCH__Matrix__Classes_1_1Memarray_1_1Entry.html">Entry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#2b97493e471167a748db9949f9f3aa23">first_free</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">points to an array of size max_sizes, its <a class="el" href="classCH__Matrix__Classes_1_1Memarray_1_1Entry.html" title="holds the information of one allocated block and serves as an item in the singly...">Entry</a> i start the free list for size 2^i <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a8117bac7e982182d4a72a2d51c5474b"></a><!-- doxytag: member="CH_Matrix_Classes::Memarray::first_used" ref="a8117bac7e982182d4a72a2d51c5474b" args="" -->
<a class="el" href="classCH__Matrix__Classes_1_1Memarray_1_1Entry.html">Entry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray.html#a8117bac7e982182d4a72a2d51c5474b">first_used</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">points to an array of size max_addr_entr, its <a class="el" href="classCH__Matrix__Classes_1_1Memarray_1_1Entry.html" title="holds the information of one allocated block and serves as an item in the singly...">Entry</a> i start the list of entries whose memory is in use and the last bits of the address form the number i <br></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCH__Matrix__Classes_1_1Memarray_1_1Entry.html">Entry</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">holds the information of one allocated block and serves as an item in the singly linked lists  <a href="classCH__Matrix__Classes_1_1Memarray_1_1Entry.html#_details">More...</a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A simple memory manager for frequent allocation and deallocation of arrays of roughly the same size. 
<p>
The Manager only allocates blocks of size 2^n and keeps for each n a singly linked list holding the free blocks of size 2^n. The occupied blocks are kept in singly linked lists indexed by the last few bits of their addresses in order to facilitate fast retrieval of the corresponding memory management entry. Currently, a block once allocated is not freed again unless the memory manager is destructed.<p>
Information about the allocated blocks is stored in Entry items that also serve for forming the linked lists. A large array of these items is allocated initially and whenever no more free <a class="el" href="classCH__Matrix__Classes_1_1Memarray_1_1Entry.html" title="holds the information of one allocated block and serves as an item in the singly...">Entry</a> items are available (i.e. all are filled with allocated blocks) a new array of <a class="el" href="classCH__Matrix__Classes_1_1Memarray_1_1Entry.html" title="holds the information of one allocated block and serves as an item in the singly...">Entry</a> items, double in size, is allocated and the old information of the old array is copied to the first half of the new items. <hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="memarray_8hxx-source.html">memarray.hxx</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue May 3 16:52:54 2011 for ConicBundle by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
